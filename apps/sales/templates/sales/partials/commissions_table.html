<style>
    .commissions-table table {
        width: 100%;
        border-collapse: collapse;
    }
    
    .commissions-table th {
        background: var(--color-gray-50);
        padding: var(--space-3);
        text-align: left;
        font-size: var(--text-sm);
        font-weight: 600;
        color: var(--color-gray-700);
        border-bottom: 2px solid var(--color-gray-200);
    }
    
    .commissions-table td {
        padding: var(--space-3);
        border-bottom: 1px solid var(--color-gray-100);
        font-size: var(--text-sm);
    }
    
    .commissions-table tr:hover {
        background: var(--color-gray-50);
    }
    
    .commissions-table tfoot {
        background: var(--color-primary-50);
        font-weight: 700;
    }
    
    .performance-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--space-1);
        padding: var(--space-1) var(--space-2);
        border-radius: var(--radius);
        font-size: var(--text-xs);
        font-weight: 600;
    }
    
    .performance-excellent {
        background: var(--color-green-100);
        color: var(--color-green-800);
    }
    
    .performance-standard {
        background: var(--color-blue-100);
        color: var(--color-blue-800);
    }
    
    .commission-breakdown {
        font-size: var(--text-xs);
        color: var(--color-gray-600);
        margin-top: var(--space-1);
    }
</style>

{% if commission_data %}
<div class="commissions-table">
    <table>
        <thead>
            <tr>
                <th>Salesperson</th>
                <th>Dispatches</th>
                <th>Total Sales</th>
                <th>Per-Unit Commission</th>
                <th>Bonus Commission</th>
                <th>Total Commission</th>
                <th>Performance</th>
            </tr>
        </thead>
        <tbody>
            {% for data in commission_data %}
            <tr>
                <td>
                    <strong>{{ data.salesperson__name }}</strong>
                </td>
                <td>{{ data.dispatch_count }}</td>
                <td style="font-weight: 600;">
                    KES {{ data.total_sales|floatformat:2|default:"0.00" }}
                </td>
                <td style="color: var(--color-primary);">
                    KES {{ data.total_per_unit_commission|floatformat:2|default:"0.00" }}
                </td>
                <td style="color: var(--color-success);">
                    {% if data.total_bonus_commission > 0 %}
                        ‚≠ê KES {{ data.total_bonus_commission|floatformat:2 }}
                    {% else %}
                        ‚Äî
                    {% endif %}
                </td>
                <td style="font-weight: 700; font-size: var(--text-lg); color: var(--color-primary);">
                    KES {{ data.total_commission|floatformat:2|default:"0.00" }}
                </td>
                <td>
                    {% if data.total_bonus_commission > 0 %}
                        <span class="performance-badge performance-excellent">
                            ‚≠ê Target Exceeded
                        </span>
                    {% else %}
                        <span class="performance-badge performance-standard">
                            üìä Standard
                        </span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="2"><strong>TOTAL</strong></td>
                <td style="font-weight: 700;">
                    KES {{ commission_totals.total_sales|floatformat:2|default:"0.00" }}
                </td>
                <td style="font-weight: 700;">
                    KES {{ commission_totals.total_per_unit|floatformat:2|default:"0.00" }}
                </td>
                <td style="font-weight: 700;">
                    KES {{ commission_totals.total_bonus|floatformat:2|default:"0.00" }}
                </td>
                <td style="font-weight: 700; font-size: var(--text-lg);">
                    KES {{ commission_totals.grand_total|floatformat:2|default:"0.00" }}
                </td>
                <td></td>
            </tr>
        </tfoot>
    </table>
</div>

<!-- Commission Structure Info -->
<div style="margin-top: var(--space-6); padding: var(--space-4); background: var(--color-blue-50); border-radius: var(--radius); border-left: 4px solid var(--color-primary);">
    <h4 style="margin-bottom: var(--space-3); color: var(--color-gray-800);">üìã Commission Structure</h4>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-4);">
        <div>
            <div style="font-weight: 600; color: var(--color-gray-800); margin-bottom: var(--space-2);">
                Per-Unit Commission
            </div>
            <ul style="list-style: none; padding: 0; color: var(--color-gray-700); font-size: var(--text-sm);">
                <li>‚Ä¢ Bread: KES 5.00 per loaf</li>
                <li>‚Ä¢ KDF: KES 5.00 per packet</li>
                <li>‚Ä¢ Scones: KES 5.00 per packet</li>
            </ul>
        </div>
        <div>
            <div style="font-weight: 600; color: var(--color-gray-800); margin-bottom: var(--space-2);">
                Bonus Commission
            </div>
            <ul style="list-style: none; padding: 0; color: var(--color-gray-700); font-size: var(--text-sm);">
                <li>‚Ä¢ Target: KES 35,000 per month</li>
                <li>‚Ä¢ Bonus Rate: 7% of sales above target</li>
                <li>‚Ä¢ Example: KES 40,000 sales = KES 350 bonus</li>
            </ul>
        </div>
    </div>
</div>

{% else %}
<div class="empty-message">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <h3 style="margin-bottom: var(--space-2); color: var(--color-gray-700);">No commissions for this period</h3>
    <p>No sales returns have been recorded in the selected date range.</p>
</div>
{% endif %}
