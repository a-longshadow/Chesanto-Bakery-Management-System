# Generated by Django 5.2.7 on 2025-10-27 13:23

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='DailyReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(help_text='Report date', unique=True)),
                ('bread_produced', models.IntegerField(default=0, help_text='Total bread produced')),
                ('kdf_produced', models.IntegerField(default=0, help_text='Total KDF produced')),
                ('scones_produced', models.IntegerField(default=0, help_text='Total scones produced')),
                ('total_batches', models.IntegerField(default=0, help_text='Number of batches')),
                ('bread_dispatched', models.IntegerField(default=0)),
                ('kdf_dispatched', models.IntegerField(default=0)),
                ('scones_dispatched', models.IntegerField(default=0)),
                ('bread_returned', models.IntegerField(default=0)),
                ('kdf_returned', models.IntegerField(default=0)),
                ('scones_returned', models.IntegerField(default=0)),
                ('bread_sold', models.IntegerField(default=0, help_text='dispatched - returned')),
                ('kdf_sold', models.IntegerField(default=0)),
                ('scones_sold', models.IntegerField(default=0)),
                ('total_revenue', models.DecimalField(decimal_places=2, default=0, help_text='Cash returned from all sales', max_digits=12)),
                ('total_direct_costs', models.DecimalField(decimal_places=2, default=0, help_text='Ingredients + packaging', max_digits=12)),
                ('total_indirect_costs', models.DecimalField(decimal_places=2, default=0, help_text='Diesel + firewood + electricity + fuel', max_digits=12)),
                ('total_costs', models.DecimalField(decimal_places=2, default=0, help_text='Direct + indirect costs', max_digits=12)),
                ('gross_profit', models.DecimalField(decimal_places=2, default=0, help_text='Revenue - total costs', max_digits=12)),
                ('gross_margin_percentage', models.DecimalField(decimal_places=2, default=0, help_text='(Gross profit / Revenue) Ã— 100', max_digits=5)),
                ('revenue_deficits', models.DecimalField(decimal_places=2, default=0, help_text='Sum of all revenue deficits', max_digits=12)),
                ('crate_deficits', models.IntegerField(default=0, help_text='Sum of all crate deficits')),
                ('total_commissions', models.DecimalField(decimal_places=2, default=0, help_text='Sum of all commissions paid', max_digits=10)),
                ('bread_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bread_cost', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bread_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bread_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('kdf_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('kdf_cost', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('kdf_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('kdf_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('scones_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('scones_cost', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('scones_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('scones_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('is_locked', models.BooleanField(default=True, help_text='Always true - reports are immutable')),
                ('generated_at', models.DateTimeField(auto_now_add=True, help_text='When report was generated')),
                ('email_sent', models.BooleanField(default=False)),
                ('email_sent_at', models.DateTimeField(blank=True, null=True)),
                ('generated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='daily_reports_generated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Daily Report',
                'verbose_name_plural': 'Daily Reports',
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='MonthlyReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('month', models.DateField(help_text='First day of the month', unique=True)),
                ('month_name', models.CharField(help_text="Month name (e.g., 'October 2025')", max_length=20)),
                ('total_bread_produced', models.IntegerField(default=0)),
                ('total_kdf_produced', models.IntegerField(default=0)),
                ('total_scones_produced', models.IntegerField(default=0)),
                ('total_batches', models.IntegerField(default=0)),
                ('total_bread_sold', models.IntegerField(default=0)),
                ('total_kdf_sold', models.IntegerField(default=0)),
                ('total_scones_sold', models.IntegerField(default=0)),
                ('total_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_direct_costs', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_indirect_costs', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_costs', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('average_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('total_revenue_deficits', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_crate_deficits', models.IntegerField(default=0)),
                ('deficit_incidents', models.IntegerField(default=0, help_text='Number of sales returns with deficits')),
                ('total_commissions', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_per_unit_commissions', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_bonus_commissions', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('bread_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bread_cost', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bread_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('bread_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('kdf_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('kdf_cost', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('kdf_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('kdf_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('scones_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('scones_cost', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('scones_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('scones_margin', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('is_locked', models.BooleanField(default=True)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('email_sent', models.BooleanField(default=False)),
                ('email_sent_at', models.DateTimeField(blank=True, null=True)),
                ('generated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='monthly_reports_generated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Monthly Report',
                'verbose_name_plural': 'Monthly Reports',
                'ordering': ['-month'],
            },
        ),
        migrations.CreateModel(
            name='WeeklyReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('week_ending', models.DateField(help_text='Last day of the week (Sunday)', unique=True)),
                ('week_starting', models.DateField(help_text='First day of the week (Monday)')),
                ('total_bread_produced', models.IntegerField(default=0)),
                ('total_kdf_produced', models.IntegerField(default=0)),
                ('total_scones_produced', models.IntegerField(default=0)),
                ('total_batches', models.IntegerField(default=0)),
                ('total_bread_sold', models.IntegerField(default=0)),
                ('total_kdf_sold', models.IntegerField(default=0)),
                ('total_scones_sold', models.IntegerField(default=0)),
                ('total_revenue', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_costs', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_profit', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('average_margin', models.DecimalField(decimal_places=2, default=0, help_text='Average margin across 7 days', max_digits=5)),
                ('total_revenue_deficits', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_crate_deficits', models.IntegerField(default=0)),
                ('total_commissions', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('is_locked', models.BooleanField(default=True)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('email_sent', models.BooleanField(default=False)),
                ('email_sent_at', models.DateTimeField(blank=True, null=True)),
                ('generated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='weekly_reports_generated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Weekly Report',
                'verbose_name_plural': 'Weekly Reports',
                'ordering': ['-week_ending'],
            },
        ),
    ]
